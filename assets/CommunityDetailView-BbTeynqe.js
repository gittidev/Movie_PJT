import{_ as V,h as j,J as I,i as w,r as _,j as R,z as F,o as a,c as i,a as t,F as K,n as q,u as f,t as h,l as $,p as A,g as D,v as M,K as C,L as x,k as T,O as H,d as O,q as P,b as U}from"./index-BZNf6Ntn.js";import{_ as J}from"./empty_popcorn_box2-DXq9_Pa-.js";import{d as W}from"./profile-DjAHAP-4.js";const z=l=>(A("data-v-5fe9c9f3"),l=l(),D(),l),G={style:{margin:"2rem 1rem"}},Q=z(()=>t("h3",null,"POTLUCK",-1)),X={class:"comment container"},Y={key:0},Z={class:"col-10"},tt=["src"],et={key:0,class:"col",style:{display:"flex","justify-content":"center","align-items":"center"}},ot=["onClick"],st={key:1},nt=z(()=>t("p",null,"댓글이 없습니다.",-1)),at=[nt],it={__name:"MovieComment",setup(l){const y=j(),s=I(),r=w(),p=y.state.user;s.communityInfo;const u=r.params.communityId,d=_([]);_(""),R(()=>{s.getCommunityInfo(u),s.getCommentList(u)}),F(()=>s.commentList,o=>{d.value=o},{immediate:!0});const n=o=>{s.deleteComment(o).then(()=>{s.getCommentList(u)})};return(o,v)=>(a(),i("div",G,[Q,t("div",X,[t("div",null,[d.value.length>0?(a(),i("div",Y,[(a(!0),i(K,null,q(d.value,m=>(a(),i("div",{key:m.id,class:"row"},[t("div",Z,[t("img",{src:m.profileImage||f(W),alt:"프로필이미지"},null,8,tt),t("span",null,h(m.content),1)]),m.user===f(p).pk?(a(),i("div",et,[t("button",{class:"btn btn-primary",onClick:g=>n(m.id)},"삭제하기",8,ot)])):$("",!0)]))),128))])):(a(),i("div",st,at))])])]))}},lt=V(it,[["__scopeId","data-v-5fe9c9f3"]]),ct={id:"update",class:"modal fade",ref:"modalRef","aria-labelledby":"random",tabindex:"-1","aria-hidden":"true"},dt={class:"modal-dialog"},rt={class:"modal-content",style:{"background-color":"#242424"}},ut={class:"modal-body",style:{"text-align":"center"}},mt={class:"d-grid col-12 mx-auto"},_t={class:"d-grid col-12 mx-auto mt-3"},pt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"닫기",-1),vt={__name:"CommunityUpdate",props:{community:Object},setup(l){const y=I();w(),M();const r=l.community.id,p=_(""),u=_(""),d=function(){const n={title:p.value,content:u.value};y.updateCommunity(n,r),alert("수정이 완료되었습니다.")};return(n,o)=>(a(),i("div",null,[t("div",ct,[t("div",dt,[t("div",rt,[t("div",ut,[t("div",mt,[C(t("input",{class:"form-control mx-auto",type:"text","onUpdate:modelValue":o[0]||(o[0]=v=>p.value=v),placeholder:"수정할 POT 이름을 적어주세요"},null,512),[[x,p.value,void 0,{trim:!0}]])]),t("div",_t,[C(t("textarea",{cols:"30",rows:"10",class:"form-control mx-auto",type:"textarea","onUpdate:modelValue":o[1]||(o[1]=v=>u.value=v),placeholder:"수정할 POT에 대한 설명을 적어주세요"},null,512),[[x,u.value]])]),t("div",{class:"modal-footer"},[pt,t("button",{type:"button",class:"btn btn-primary",onClick:d},"수정하기")])])])])],512)]))}},yt="/assets/marsh2-ju40K5yb.png",ht="/assets/marsh3-ijLt6WOl.png",b=l=>(A("data-v-92ea977d"),l=l(),D(),l),ft={class:"container"},bt={key:0,style:{display:"flex","align-items":"center","justify-content":"center"}},gt=b(()=>t("img",{src:J,alt:"",style:{width:"50%",display:"block"}},null,-1)),kt=b(()=>t("h2",{style:{"font-family":"'LOTTERIACHAB'",display:"block"}},"로딩 중...",-1)),$t=[gt,kt],Ct={key:1},xt={class:"row"},It={class:"col-8"},wt={class:"col-4",style:{"text-align":"right"}},Lt={key:0,class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#update"},St={class:"row"},Tt={class:"col col-sm-8 comunity-info card",style:{border:"red 1px solid",position:"relative"}},Ot={class:""},Pt=b(()=>t("br",null,null,-1)),Ut={style:{position:"absolute",right:"1rem",bottom:"0.5rem"}},Vt={style:{width:"300px"}},jt=b(()=>t("p",null,"[좋아요/싫어요 하나만 선택하세요!]",-1)),Rt={style:{"text-align":"right"}},At=["src"],Dt=["src"],Mt={class:"col col-sm-4"},zt={class:"mb-3"},Bt=b(()=>t("div",null,[U(" 포트럭은 익명의 공간이예요. "),t("br"),U(" 좋아하는 영화 POT에서 자유롭게 놀아봐요! ")],-1)),Nt={class:"row"},Et={__name:"CommunityDetailView",setup(l){const y=_(!0),s=j(),r=I(),p=w(),u=M(),d=_(""),n=T(()=>r.communityInfo),o=parseInt(p.params.communityId,10),v=s.state.user,m=_(!1),g=_(!1),L=T(()=>m.value&&!g.value?"좋아합니다 :)":!m.value&&g.value?"싫어합니다 ㅠㅠ":"???"),B=function(){P({method:"post",url:`${s.API_URL}/marshmovie/communities/${o}/likes/`,headers:{Authorization:`Token ${s.token}`}}).then(e=>{if(e.status>=200&&e.status<300)m.value=e.data.liked;else return Promise.reject(e.data)}).catch(e=>{console.log(e)})},N=function(){P({method:"post",url:`${s.API_URL}/marshmovie/communities/${o}/dislikes/`,headers:{Authorization:`Token ${s.token}`}}).then(e=>{if(e.status>=200&&e.status<300)g.value=e.data.disliked;else return Promise.reject(e.data)}).catch(e=>{console.log(e)})};R(()=>{r.getCommunityInfo(o),console.log(n.value),y.value=!1,console.log(L)});const E=function(e){r.deleteCommunity(e),u.push({name:"community"})},S=()=>{const e={content:d.value,user:s.state.user.pk};r.createComment(e,o).then(()=>{d.value="",alert("댓글생성완료"),r.getCommentList(o)}).catch(c=>{c.value="Failed to create comment",console.error(c)})};return(e,c)=>(a(),i("div",ft,[y.value?(a(),i("div",bt,$t)):(a(),i("div",Ct,[t("div",xt,[t("div",It,[t("h1",null,h(n.value.title),1)]),t("div",wt,[n.value.create_user==f(v).pk?(a(),i("button",Lt,"수정하기")):$("",!0),n.value.create_user==f(v).pk?(a(),i("button",{key:1,onClick:c[0]||(c[0]=k=>E(n.value.id)),class:"btn btn-primary"},"삭제하기")):$("",!0)])]),t("div",St,[t("div",Tt,[t("p",Ot,"POT : "+h(n.value.title),1),t("p",null,"MOVIE : "+h(n.value.movie_title),1),t("p",null,"POT 설명 : "+h(n.value.content),1),Pt,t("div",Ut,[t("div",Vt,[t("p",null,"당신은 이 POT을 "+h(L.value),1),jt]),t("div",Rt,[t("img",{src:f(ht),alt:"좋아요",onClick:c[1]||(c[1]=k=>B())},null,8,At),t("img",{src:f(yt),alt:"싫어요",onClick:c[2]||(c[2]=k=>N())},null,8,Dt)])])]),t("div",Mt,[t("div",zt,[Bt,t("form",{onSubmit:H(S,["prevent"])},[C(t("textarea",{cols:"30",rows:"10","onUpdate:modelValue":c[3]||(c[3]=k=>d.value=k),type:"input",class:"form-control",placeholder:`파티에 참여해봐!\r
* 생성시 삭제만 가능해요! 자유롭게 익명으로 소통하세요!`,"aria-label":"Recipient's username","aria-describedby":"button-addon2"},`\r
            `,512),[[x,d.value]]),t("button",{class:"btn btn-outline-secondary pot-button",type:"button",id:"button-addon2",onClick:S},"pot")],32)])])]),t("div",Nt,[O(lt)]),O(vt,{style:{"z-index":"9999"},community:n.value},null,8,["community"])]))]))}},Ht=V(Et,[["__scopeId","data-v-92ea977d"]]);export{Ht as default};
